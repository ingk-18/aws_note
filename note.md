# 基本用語

## プロビジョニング

ITリソースを準備し、利用可能な状態にするプロセスを指します。具体的には、ハードウェアの準備、ネットワーク、ソフトウェアのインストール。

## メトリクス

システムのパフォーマンスをリアルタイムで監視するために使用されます。例えば、CPU使用率、メモリ使用量、ディスクI/O、ネットワークトラフィックなどが一般的なメトリクスです。

## IOPS（Input/Output Operations Per Second）

ストレージデバイスの性能を評価するための指標で、1秒間に処理できる入出力操作の回数を示します。

## スループット

システムやネットワークが一定時間内に処理できるデータ量を示す指標です。通常、秒あたりのビット数（bps）、バイト数（Bps）、またはパケット数で表されます。IOPSは操作の回数

## ファイルサーバー

ネットワーク上でファイルを保存し、共有するための専用のサーバーです。

## Active Directory（

Microsoftが開発したディレクトリサービスで、ネットワーク上のリソース（ユーザー、コンピュータ、プリンター、ファイル共有など）を管理するためのシステムです。ユーザーアカウントやグループを作成し、ネットワークリソースへのアクセスを管理します。


## ストレージタイプ

| ストレージタイプ | 説明 | 具体例 | 主な用途 |
|------------------|------|--------|---------|
| **ファイルストレージ** | データをファイルやフォルダの単位で管理し、階層構造で整理するストレージ形式。 | NFS（Network File System）、SMB（Server Message Block） | ファイル共有、ドキュメント管理、メディアストレージ |
| **ブロックストレージ** | データを固定サイズのブロックに分割して管理するストレージ形式。 | Amazon EBS、SAN（Storage Area Network） | データベース、仮想マシンのディスク、トランザクション処理 |
| **仮想テープストレージ** | 物理テープの代替として、仮想テープライブラリを使用してデータを保存するストレージ形式。 | AWS Storage Gatewayのテープゲートウェイ | バックアップ、アーカイブ、災害復旧 |

## 可用性

システムやサービスがユーザーに対してどれだけ継続的に利用可能であるかを示す指標です。


# ネットワーク

# VPC

- 「リージョン = 国や地域の単位」
  - 「AZ = その中のデータセンター単位」

## NAT
- NAT（Network Address Translation）は、ネットワークアドレス変換の略で、プライベートネットワーク内のIPアドレスを、外部のパブリックネットワーク（通常はインターネット）に接続する際に変換する技術です。NATインスタンスやNATゲートウェイを使用して、プライベートサブネット内のリソースがインターネットにアクセスできるようにしつつ、外部からの直接アクセスを防ぐことができます。


| 種類         | 説明                                                                 |
|--------------|----------------------------------------------------------------------|
| NATインスタンス | EC2インスタンスをNAT用に設定して、プライベートサブネットからインターネット通信を中継する方法。 |
| NATゲートウェイ | AWSが提供するフルマネージド型のNATサービス。                           |




### インターネットを経由せずにAWSサービスにアクセスするための手段

| 特徴               | VPCエンドポイント                          | AWS PrivateLink                        | VPCピアリング                          |
|--------------------|-------------------------------------------|----------------------------------------|----------------------------------------|
| 対象サービス       | 主にS3やDynamoDBなどの特定のAWSサービス   | AWSサービスおよびサードパーティサービス | VPC間の通信                           |
| 接続方法           | ゲートウェイエンドポイントまたはインターフェイスエンドポイント | インターフェイスエンドポイント         | VPC間の直接接続                       |
| 主な用途           | 特定のAWSサービスへのプライベートアクセス | 幅広いサービスへのプライベートアクセス | VPC間のプライベート通信               |
| セキュリティ       | インターネットを経由せずにアクセス可能     | インターネットを経由せずにアクセス可能 | インターネットを経由せずにアクセス可能 |
| サードパーティ対応 | 対応していない                             | 対応している                           | 対応していない                         |


- VPCピアリング
  - VPC同士を1対1で接続する機能です。同一アカウントのVPC同士や他のAWSアカウントのVPC、異なるリージョンのVPCでも、同一のプライベートネットワーク内に存在しているかのように相互に通信できます。

## ルートテーブル

ルートテーブルは、VPC内のサブネットから送信(受信ではない)されるトラフィックの経路を決定するためのものです。各エントリは、特定のIPアドレス範囲に対して、どのターゲット（例: インターネットゲートウェイ、NATゲートウェイ）を使用するかを指定します。

## セキュリティグループとネットワークACLの違い

![](images/2025-02-08-17-49-34.png)



| 特徴 | セキュリティグループ | ネットワークACL |
|------|---------------------|-----------------|
| レベル | インスタンスレベル | サブネットレベル |
| ステート | ステートフル（外部からのリクエストが許可されると、その応答も自動的に許可） | ステートレス（外部からのリクエストとその応答を個別に設定） |
| デフォルト設定 | 外部からのすべてのリクエストを拒否し、内部からの応答を許可 | 外部からのすべてのリクエストと応答を許可 |
| ルールの種類 | 許可のみ設定可能 | 許可と拒否の両方を設定可能 |
| 適用範囲 | 各インスタンスに個別に設定 | サブネット全体に適用 |



# ELB

## ALBのルーティングの種類と具体例

| ルーティングの種類 | 説明 | 具体例 |
|------------------|------|--------|
| **パスベースルーティング** | リクエストのURLパスに基づいてルーティングを行う。 | `/images/*`のパスを持つリクエストを画像サーバーにルーティング。例: `/images/photo.jpg` |
| **ホストベースルーティング** | リクエストのホストヘッダー（ドメイン名）に基づいてルーティングを行う。 | `example.com`へのリクエストをウェブサーバーに、`api.example.com`へのリクエストをAPIサーバーにルーティング。 |
| **HTTPヘッダールーティング** | 特定のHTTPヘッダーの値に基づいてルーティングを行う。 | `X-Environment: production`のヘッダーを持つリクエストを本番環境にルーティング。 |
| **クエリパラメータルーティング** | リクエストのクエリパラメータに基づいてルーティングを行う。 | `?version=beta`のクエリを持つリクエストをベータ版サーバーにルーティング。例: `https://example.com/app?version=beta` |
| **メソッドベースルーティング** | HTTPメソッド（GET, POST, PUTなど）に基づいてルーティングを行う。 | `POST`メソッドのリクエストをデータ処理サーバーにルーティング。 |



# S3

## S3のアクセス制御の種類まとめ

| 方法 | 制御単位 | 特徴 | 主な用途 | AWSアカウントへの制限 |
|------|----------|------|---------|----------------------|
| **S3バケットポリシー** | **バケット単位** | IPアドレスやドメイン単位でのアクセス制御、自AWSアカウントの制御 | **バケットごとのアクセス管理** | 可能 |
| **IAMポリシー** | **IAMユーザー・ロール** | AWSリソース全体で適用可能 | **AWSアカウント内のアクセス制御** | 間接的に可能 |
| **S3 ACL** | **オブジェクト単位** | 他AWSアカウント単位でアクセス権限を設定する読み取りまたは書き込みを許可できる機能です。アクセス元のIPアドレスやドメイン単位でのアクセス制御はできない | **特定のオブジェクトに特別な権限を設定** | 可能 |
| **Presigned URL** | **オブジェクト単位** | 一時的なアクセス許可 | **期限付きのダウンロード・アップロード** | 制限不可（生成者の権限に依存） |


## S3のストレージクラスまとめ

| ストレージクラス | 特徴 | 主な用途 |
|------------------|------|---------|
| **S3 Standard** | 高い耐久性と可用性 | 頻繁にアクセスされるデータ |
| **S3 Intelligent-Tiering** | アクセスパターンに基づいて自動的に階層を移動 | アクセスパターンが不明なデータ |
| **S3 Standard-IA** | 低頻度アクセス用、低コスト | 頻繁にはアクセスされないが、即時アクセスが必要なデータ |
| **S3 One Zone-IA** | 低頻度アクセス用、単一AZで低コスト | 再作成可能なデータ |
| **S3 Glacier Instant Retrieval** | アーカイブ用、即時アクセス可能、低コスト | 即時アクセスが必要なアーカイブデータ |
| **S3 Glacier Flexible Retrieval** | アーカイブ用、柔軟な取得オプション、低コスト | アーカイブデータで、数分から数時間の取得が可能 |
| **S3 Glacier Deep Archive** | 最も低コストのアーカイブ | 長期保存が必要なデータ |

# Lambda

1. 作成したLambda関数はLambda専用のセキュアなVPCに配置されます。このLambda専用のVPCからは、インターネットや、インターネットを経由してパブリックサブネット内のAWSリソースにはアクセスできますが、プライベートサブネット内のAWSリソースへはアクセスできません。
2. Lambda関数からプライベートサブネット内のAWSリソースへアクセスさせたい場合は「VPCアクセス」の設定をします。ENI（Elastic Network Interface）を作成して、プライベートサブネット内のAWSリソースへアクセスします。
VPCアクセスを設定したLambda関数は、ENIを作成したサブネットへアクセスできるようになる代わりに、インターネットへアクセスできなくなります。

![](images/2025-02-11-16-25-59.png)

# ECS

![](images/2025-02-11-15-54-40.png)

## Amazon ECSの主要コンポーネント

| コンポーネント     | 説明                                                                                     |
|------------------|----------------------------------------------------------------------------------------|
| **クラスター**     | コンテナを実行するための論理的なグループ。EC2インスタンスやFargateを使用してリソースを管理。 |
| **タスク定義**     | コンテナをどのように実行するかを定義するテンプレート。コンテナイメージ、CPU、メモリなどを指定。 |
| **タスク**         | タスク定義に基づいて実行されるコンテナのインスタンス。1つ以上のコンテナを含むことが可能。     |
| **サービス**       | 必要なタスク数を維持する機能です。あるタスクが異常終了して必要なタスク数を下回った場合、サービスが新しいタスクを起動して自動復旧します。サービスでは、起動するタスクのタスク定義、必要なタスク数、ELBとの連携などを設定します。タスクのスケーリングやロードバランシングを管理。   |
| **コンテナエージェント** | EC2インスタンス上で動作し、ECSクラスターと通信してタスクの実行を管理。   

## ECR（Elastic Container Registry）

コンテナイメージを登録・管理するサービスです。ECRに登録されたコンテナイメージをECSが参照し、コンテナ（タスク）を起動できます                  |

# Amazon EKS（Elastic Kubernetes Service）

![](images/2025-02-11-16-46-49.png)

## Kubernetesの基本コンポーネント

| コンポーネント | 説明                                                                                     |
|----------------|------------------------------------------------------------------------------------------|
| クラスター     | Kubernetesの基本単位で、コンテナ化されたアプリケーションを実行するためのノードの集合体です。クラスターは、マスター（コントロールプレーン）とワーカーノードで構成されます。 |
| ノード         | クラスター内の1つのマシン（物理または仮想）で、コンテナを実行するためのリソースを提供します。ノードには、Kubelet、コンテナランタイム、Kube-proxyなどのコンポーネントが含まれます。 |
| ポッド         | Kubernetesの最小デプロイメント単位で、1つ以上のコンテナを含むことができます。ポッド内のコンテナは、同じネットワーク名前空間を共有し、同じIPアドレスを持ちます。 |

ECSがAWS独自のコンテナオーケストレーションサービスであるのに対し、Amazon EKSはオープンソースのKubernetesをAWS上で運用するためのサービスです。

- Kubernetesは、コンテナ化されたアプリケーションのデプロイ、スケーリング、管理を自動化するためのオープンソースのコンテナオーケストレーションプラットフォームです。以下にEKSの主な特徴を説明します：




## Fargate

Amazon ECSやAmazon EKSでコンテナを実行するためのサーバーレスコンピューティングエンジンです。Fargateを使用すると、インフラストラクチャの管理を気にせずにコンテナを実行できます。必要なリソース（CPU、メモリ）を指定するだけで、Fargateが自動的にインフラストラクチャをプロビジョニングし、管理します。つまり、Dockerfileはコンテナの中身を定義し、Fargateはそのコンテナをどのように実行するかを管理する役割を果たします。

# ストレージ

## まとめ

| ストレージサービス | タイプ           | 主な用途 | 特徴 |
|-------------------|-----------------|---------|------|
| **Amazon S3**     | オブジェクトストレージ | バックアップ、アーカイブ、ビッグデータ分析 | 高い耐久性とスケーラビリティ、容量無制限、HTTP/HTTPSでアクセス可能 |
| **Amazon EBS**    | ブロックストレージ   | EC2インスタンスのストレージ | 低レイテンシー、高いパフォーマンス、EC2にアタッチして使用 |
| **Amazon EFS**    | ファイルストレージ   | 複数のEC2インスタンス間でのファイル共有 | NFSプロトコルを使用、スケーラブルで高可用性 |
| **Amazon FSx**    | ファイルストレージ   | Windowsアプリケーション、HPC、ビッグデータ | Windowsネイティブ、SMBプロトコル、完全マネージド |

# Amazon EBS（Elastic Block Store）

インスタンスストアと同様に、EC2インスタンスの内部ストレージと同じように利用できるブロックストレージです。
EBSの記憶領域のことを「EBSボリューム」といい、EC2に割り当てることを「アタッチ」といいます。EC2インスタンスにアタッチされたEBSボリュームは、AWS内のネットワーク経由でEC2インスタンスと接続します。

## ブロックストレージ

記憶媒体を「ブロック」という固定長の単位で分割して管理するストレージのことです。

## EBSボリュームタイプ

| ボリュームタイプ       | 特徴                                                                 | 主な用途                                           |
|-----------------------|----------------------------------------------------------------------|---------------------------------------------------|
| **汎用SSD（gp3, gp2）** | バランスの取れたパフォーマンスとコストを提供。IOPSとスループットがスケーラブル。 | 一般的な用途、開発環境、テスト環境、ブートボリューム |
| **プロビジョンドIOPS SSD（io2, io1）** | 高いIOPSと低レイテンシーを提供。IOPSを指定してプロビジョニング可能。 | 高性能が求められるデータベースやミッションクリティカルなアプリケーション |
| **スループット最適化HDD（st1）** | 大容量でスループットが重視されるワークロード向け。コスト効率が高い。 | ビッグデータ、データウェアハウス、ログ処理         |
| **Cold HDD（sc1）**   | 最も低コストのHDDボリューム。スループットが低い。                   | アーカイブデータ、アクセス頻度の低いデータ         |
| **マグネティック（標準）** | 旧式のHDDボリューム。新しいワークロードには推奨されない。         | 低コストのバックアップやアーカイブ用途             |


## AWS Snow Family

オンプレミス上の大量のデータをAWSのストレージへ安全に転送するために、専用の物理デバイスを提供するサービスです。AWSから大容量ストレージを搭載したデバイスが貸し出され、ユーザーが移行対象のデータをデバイスへ取り込みます。

| デバイスタイプ         | 用途                           | 特徴                                                                 |
|----------------------|------------------------------|--------------------------------------------------------------------|
| **AWS Snowcone**     | 小規模なデータ転送、エッジコンピューティング | 小型でポータブル、約8TBのストレージ容量、エッジでのデータ収集や処理に適しています。 |
| **AWS Snowball**     | 大規模なデータ転送、エッジコンピューティング（データを生成するデバイスの近くでデータ処理を行います。） | 耐久性のあるデバイス、50TBまたは80TBのストレージ容量、エッジコンピューティング機能をサポート。 |
| **AWS Snowball Edge**| データ転送、エッジコンピューティング | ストレージ最適化モデル（最大80TB）とコンピューティング最適化モデル、強力なエッジでのデータ処理。 |
| **AWS Snowmobile**   | 大規模なデータセンターの移行       | 100PBまでのデータを物理的に移動可能なトレーラー、大規模なデータセンターの移行やバックアップに適しています。 |

## Amazon FSx
Amazon FSxはファイル共有に適したファイルストレージサービスです。ファイルストレージとはデータをファイルやフォルダの単位で階層構造として管理するストレージ形式のことをいいます。


| FSx バリエーション         | 主な用途 | 特徴 | 具体例 |
|---------------------------|---------|------|--------|
| **FSx for Windows File Server** | Windowsアプリケーション、ファイル共有 | Windowsネイティブ、SMBプロトコル、Active Directory統合 | 企業内のファイル共有、Windowsアプリケーションのデータストレージ |
| **FSx for Lustre**        | 高性能コンピューティング（HPC）、ビッグデータ分析 | 高スループット、低レイテンシー、POSIX互換 | 機械学習、メディア処理、金融モデリング |
| **FSx for NetApp ONTAP**  | エンタープライズアプリケーション、データ管理 | NetAppのONTAPデータ管理機能、NFS/SMB/iSCSIサポート | データベース、仮想デスクトップ、バックアップとリカバリ |

## Amazon EFS（Elastic File System）

EFS（Elastic File System）はNFS（※1）をサポートするファイルストレージサービスです。EFSは、主に複数のEC2インスタンスやオンプレミスからアクセスされるファイル共有ストレージとして利用されます。


## Storage Gateway
Storage GatewayそのものはAmazon S3やAmazon FSxなどのようなストレージサービスではありません。Gateway（規格の異なるネットワーク間を中継して接続する機器）の名が示す通り、オンプレミスとAWSストレージサービスとを橋渡しする役目を持つサービスです。NFS（Network File System）またはSMB（Server Message Block）を使用してAWSストレージへアクセスできるサービスです。


# DB

| サービス名          | タイプ               | 主な用途 | 特徴 | マルチAZ | オートスケーリング | リードレプリカ |
|--------------------|---------------------|---------|------|---------|-------------------|---------------|
| **Amazon RDS**     | リレーショナルデータベース | トランザクション処理、OLTP | Aurora,MySQL、PostgreSQL、Oracle、SQL Serverなどをサポート。自動バックアップ、スケーリング、異なるAZとリージョンに配置できる。 | 対応 | ストレージのみ対応 | 対応 |
| **Amazon Redshift**| データウェアハウス     | ビッグデータ分析、OLAP | 高速なクエリ処理、ペタバイト規模のデータ分析。カラムナストレージを使用。 | 非対応 | 手動スケーリング | 非対応 |
| **Amazon DynamoDB**| NoSQLデータベース     | 高スループット、低レイテンシーのアプリケーション | フルマネージド、スケーラブル、キーと値のデータモデル。 | 対応 | 対応 | グローバルテーブルで対応 |
| **Amazon ElastiCache** | インメモリデータストア | キャッシュ、リアルタイムデータ処理 | RedisまたはMemcachedをサポート。低レイテンシーでデータアクセスを高速化。 | Redis版のみ対応 | 非対応 | Redis版のみ対応 |


- フェイルオーバーは、システムの一部が障害を起こした際に、別のシステムやコンポーネントに自動的に切り替えるプロセスです。
- マルチAZ（(2)参照）を利用してRRを複数のAZに分散したり、異なるリージョンに配置することもできます。
- **RR（リードレプリカ）**という、参照専用のデータベースとして動作するレプリカ（複製）を作ることができます。データベースの参照時にかかる負荷が高い場合、RRを最大15台スケールアウト（処理台数の追加）し、参照時の負荷を分散できます。
- レプリケーションは、データを複数の場所にコピーして保持するプロセスです。

## RDS

- 暗号化
  - 暗号化を行う場合はデータベースの作成時に指定し、作成した後に暗号を有効化することはできません。暗号化を行うと、バックアップやスナップショット、ログ、RRへも暗号化が行われます。暗号化を解除する方法はありません

### RDSとDBエンジンの関係
- RDSの役割:
Amazon RDSは、データベースのインフラストラクチャ管理を簡素化するためのフルマネージドサービスです。データベースのセットアップ、パッチ適用、バックアップ、スケーリング、フェイルオーバーなどの管理タスクを自動化します。
- MySQLの役割:
MySQLは、RDS上で動作するデータベースエンジンの一つです。
RDSでMySQLを選択すると、MySQLのデータベース機能（クエリ、ストアドプロシージャ、トリガーなど）をそのまま使用できます。


### Amazon Aurora(RDSの一部)

Auroraのストレージは高い耐障害性を持ちます。
デフォルトで3つのAZに2つずつ（計6つ）のデータコピーが作成されます。




# KMS??